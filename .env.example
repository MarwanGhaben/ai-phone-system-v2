# =====================================================
# AI Voice Platform v2 - Environment Variables
# =====================================================
# Copy this file to .env and fill in your values
#
# SECURITY NOTICE:
# - NEVER commit .env files to version control
# - Use strong, unique passwords for all credentials
# - Rotate secrets regularly in production
# - Generate SECRET_KEY with: openssl rand -hex 32
# =====================================================

# =====================================================
# DATABASE (REQUIRED - no defaults)
# =====================================================
# Use strong passwords! Example: openssl rand -base64 24
POSTGRES_USER=ai_voice
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD
POSTGRES_DB=ai_voice_db
DATABASE_URL=postgresql://ai_voice:CHANGE_THIS_TO_A_STRONG_PASSWORD@postgres:5432/ai_voice_db

# =====================================================
# REDIS
# =====================================================
REDIS_URL=redis://redis:6379/0
# Optional: Set a Redis password for additional security
# REDIS_PASSWORD=your_redis_password

# =====================================================
# TWILIO (Telephony)
# =====================================================
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# =====================================================
# STT PROVIDER (Speech-to-Text)
# =====================================================
# Options: deepgram | whisper
# - deepgram: Faster, streaming, but ENGLISH ONLY (no Arabic)
# - whisper: Slower (1-2s delay), but supports 50+ languages including Arabic
STT_PROVIDER=whisper  # Use 'whisper' for Arabic support

# =====================================================
# DEEPGRAM (Speech-to-Text - English only)
# =====================================================
DEEPGRAM_API_KEY=your_deepgram_api_key
DEEPGRAM_LANGUAGE=en-US  # en-US only (Arabic NOT supported)

# =====================================================
# OPENAI WHISPER (Speech-to-Text - includes Arabic)
# =====================================================
# Uses same OPENAI_API_KEY from LLM section below
WHISPER_MODEL=whisper-1  # whisper-1 is the standard API model
WHISPER_LANGUAGE=  # Leave empty for auto-detect, or set 'en', 'ar', etc.
WHISPER_SILENCE_DURATION=1.0  # Seconds of silence to trigger transcription
WHISPER_MIN_AUDIO_LENGTH=0.5  # Minimum seconds before transcribing

# =====================================================
# ELEVENLABS (Text-to-Speech)
# =====================================================
ELEVENLABS_API_KEY=your_elevenlabs_api_key
ELEVENLABS_VOICE_ID=Rachel  # Options: Rachel, Drew, Clyde, Sarah, etc.

# =====================================================
# OPENAI (LLM)
# =====================================================
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o  # or gpt-4o-mini for faster/cheaper
OPENAI_TEMPERATURE=0.7  # 0.0 = strict, 1.0 = creative
OPENAI_MAX_TOKENS=300  # Max words in AI response (keep short for phone)

# =====================================================
# MICROSOFT GRAPH (Bookings Calendar)
# =====================================================
MS_BOOKINGS_TENANT_ID=your_tenant_id
MS_BOOKINGS_CLIENT_ID=your_client_id
MS_BOOKINGS_CLIENT_SECRET=your_client_secret
MS_BOOKINGS_BUSINESS_ID=your_business_id  # From MS Bookings URL

# =====================================================
# MICROSOFT GRAPH (Email for MFA)
# =====================================================
# Used for sending MFA verification codes via Microsoft 365
# App registration needs Mail.Send permission
MSGRAPH_TENANT_ID=your_tenant_id
MSGRAPH_CLIENT_ID=your_client_id
MSGRAPH_CLIENT_SECRET=your_client_secret
MSGRAPH_SENDER_EMAIL=noreply@yourdomain.com  # Must be a valid M365 mailbox

# =====================================================
# SECURITY (REQUIRED)
# =====================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE_THIS_GENERATE_WITH_openssl_rand_hex_32

# Development only: Skip Twilio signature validation for local testing
# WARNING: Never set to true in production!
SKIP_TWILIO_SIGNATURE_VALIDATION=false

# =====================================================
# SMS (Optional - for notifications)
# =====================================================
TELNYX_API_KEY=your_telnyx_api_key
TELNYX_PHONE_NUMBER=+1234567890

# =====================================================
# APPLICATION
# =====================================================
ENVIRONMENT=development  # development | staging | production
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR
# Comma-separated list of allowed origins for CORS
# For Docker deployment, include http://localhost and your server's IP/domain
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost
# Public domain for external access (used for Twilio WebSocket URLs)
# Example: agent.ghaben.ca
PUBLIC_DOMAIN=agent.ghaben.ca

# =====================================================
# FEATURES
# =====================================================
ENABLE_ANALYTICS=true
ENABLE_RECORDING=true
MAX_CALL_DURATION=600  # seconds
DEFAULT_LANGUAGE=en  # en | ar | auto
